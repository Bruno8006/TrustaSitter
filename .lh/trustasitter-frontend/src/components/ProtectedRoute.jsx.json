{
    "sourceFile": "trustasitter-frontend/src/components/ProtectedRoute.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1751462613831,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1751462613831,
            "name": "Commit-0",
            "content": "import React, { useContext } from \"react\";\r\nimport { Navigate } from \"react-router-dom\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\n\r\nconst ProtectedRoute = ({ children, allowedRoles }) => {\r\n  const { user, role, isLoading } = useContext(AuthContext);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex justify-center items-center min-h-screen\">\r\n        <p className=\"text-gray-600\">Loading...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Not logged in\r\n  if (!user || !role) {\r\n    return <Navigate to=\"/login\" replace />;\r\n  }\r\n\r\n  // Role not allowed\r\n  if (allowedRoles && !allowedRoles.includes(role)) {\r\n    return <Navigate to=\"/\" replace />;\r\n  }\r\n\r\n  // All good\r\n  return children;\r\n};\r\n\r\nexport default ProtectedRoute;\r\n"
        }
    ]
}